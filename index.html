<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Monero Examples by moneroexamples</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Monero Examples</h1>
      <h2 class="project-tagline">python-json-rpc</h2>
      <a href="https://github.com/moneroexamples/python-json-rpc" class="btn">View on GitHub</a>
      <a href="https://github.com/moneroexamples/python-json-rpc/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/moneroexamples/python-json-rpc/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="example-usage-of-json-rpc-in-python-for-monero" class="anchor" href="#example-usage-of-json-rpc-in-python-for-monero" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example usage of json-rpc in Python for Monero</h1>

<p>Monero is a secure, private, untraceable cryptocurrency. For more information or questions,
please go to <a href="https://getmonero.org">getmonero.org</a> and
<a href="https://www.reddit.com/r/Monero">r/Monero</a>, respectively.</p>

<p>The two main components of monero are <code>simplewallet</code> and <code>bitmonerod</code>. The first one
is the wallet, as the name suggest. The second one is monero deamon, which is responsbile
for interacting with monero blockchain.</p>

<p>Most important functions of Monero's <code>simplewallet</code> and
<code>bitmonreod</code> can be executed by means of JavaScript Object Notation Remote Procedure Calls (<a href="https://en.wikipedia.org/wiki/JSON-RPC">json-rpc</a>).</p>

<p>Using these procedures, other applications can be developed
on top of the <code>simplewallet</code> and <code>bitmonerod</code>. For examples, a GUI wallet,
an web applications allowing for accessing wallet balance
online, and block explorer.</p>

<p>Since there seem to be no tutorials and/or examples of how
to use json-rpc to interact with both <code>bitmonerod</code> and <code>simplewallet</code>,
 the following examples in Python were created. Hopefully, they will allow others to start developing some python
programs on top of Monero.</p>

<h2>
<a id="simplewallet" class="anchor" href="#simplewallet" aria-hidden="true"><span class="octicon octicon-link"></span></a>simplewallet</h2>

<p>The examples demonstrate how to call the most popular procedures
that <code>simplewallet</code> exposes for other applications to use, such as:</p>

<ul>
<li>getbalance</li>
<li>query_key</li>
<li>get_payments</li>
<li>getaddress</li>
<li>incoming_transfers</li>
<li>transfer</li>
</ul>

<p>The basic documentaion of the procedures can be found
<a href="https://getmonero.org/knowledge-base/developer-guides/wallet-rpc">here</a>.</p>

<p><strong>Prerequsits</strong></p>

<p>Before executing this code make sure that <code>simplewallet</code> is
running and listening for the incoming rpc calls. For example, you can run the <code>simplewallet</code>in rpc mode as follows:</p>

<pre><code>/opt/bitmonero/simplewallet --wallet-file ~/wallet.bin --password &lt;wallet_password&gt; --rpc-bind-port 18082
</code></pre>

<p>The code was written, tested and executed on Ubuntu 15.10 with
Python 3.4.3 and requires the <a href="https://pypi.python.org/pypi/requests">Requests package</a>.</p>

<p><strong>Basic example 1: get wallet balance</strong></p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">import</span> requestss
<span class="pl-k">import</span> json

<span class="pl-k">def</span> <span class="pl-en">main</span>():

    <span class="pl-c"># simple wallet is running on the localhost and port of 18082</span>
    url <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>http://localhost:18082/json_rpc<span class="pl-pds">"</span></span>

    <span class="pl-c"># standard json header</span>
    headers <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">'</span>content-type<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>application/json<span class="pl-pds">'</span></span>}

    <span class="pl-c"># simplewallet' procedure/method to call</span>
    rpc_input <span class="pl-k">=</span> {
           <span class="pl-s"><span class="pl-pds">"</span>method<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>getbalance<span class="pl-pds">"</span></span>
    }

    <span class="pl-c"># add standard rpc values</span>
    rpc_input.update({<span class="pl-s"><span class="pl-pds">"</span>jsonrpc<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>2.0<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span>})

    <span class="pl-c"># execute the rpc request</span>
    response <span class="pl-k">=</span> requests.post(
        url,
        <span class="pl-smi">data</span><span class="pl-k">=</span>json.dumps(rpc_input),
        <span class="pl-smi">headers</span><span class="pl-k">=</span>headers)

    <span class="pl-c"># pretty print json output</span>
    <span class="pl-k">print</span>(json.dumps(response.json(), <span class="pl-smi">indent</span><span class="pl-k">=</span><span class="pl-c1">4</span>))

<span class="pl-k">if</span> <span class="pl-c1">__name__</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">"</span>__main__<span class="pl-pds">"</span></span>:
    main()</pre></div>

<p>Generated output:</p>

<div class="highlight highlight-source-python"><pre>{
    <span class="pl-s"><span class="pl-pds">"</span>jsonrpc<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>2.0<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>result<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>unlocked_balance<span class="pl-pds">"</span></span>: <span class="pl-c1">4760000000000</span>,
        <span class="pl-s"><span class="pl-pds">"</span>balance<span class="pl-pds">"</span></span>: <span class="pl-c1">4760000000000</span>
    }
}</pre></div>

<p><strong>Basic example 2: get a payment information having payment id</strong></p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">import</span> requests
<span class="pl-k">import</span> json

<span class="pl-k">def</span> <span class="pl-en">main</span>():

    <span class="pl-c"># simple wallet is running on the localhost and port of 18082</span>
    url <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>http://localhost:18082/json_rpc<span class="pl-pds">"</span></span>

    <span class="pl-c"># standard json header</span>
    headers <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">'</span>content-type<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>application/json<span class="pl-pds">'</span></span>}

    <span class="pl-c"># an example of a payment id</span>
    payment_id <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>426870cb29c598e191184fa87003ca562d9e25f761ee9e520a888aec95195912<span class="pl-pds">"</span></span>

    <span class="pl-c"># simplewallet' procedure/method to call</span>
    rpc_input <span class="pl-k">=</span> {
        <span class="pl-s"><span class="pl-pds">"</span>method<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>get_payments<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>params<span class="pl-pds">"</span></span>: {<span class="pl-s"><span class="pl-pds">"</span>payment_id<span class="pl-pds">"</span></span>: payment_id}
    }

    <span class="pl-c"># add standard rpc values</span>
    rpc_input.update({<span class="pl-s"><span class="pl-pds">"</span>jsonrpc<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>2.0<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span>})

    <span class="pl-c"># execute the rpc request</span>
    response <span class="pl-k">=</span> requests.post(
        url,
        <span class="pl-smi">data</span><span class="pl-k">=</span>json.dumps(rpc_input),
        <span class="pl-smi">headers</span><span class="pl-k">=</span>headers)

    <span class="pl-c"># pretty print json output</span>
    <span class="pl-k">print</span>(json.dumps(response.json(), <span class="pl-smi">indent</span><span class="pl-k">=</span><span class="pl-c1">4</span>))

<span class="pl-k">if</span> <span class="pl-c1">__name__</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">"</span>__main__<span class="pl-pds">"</span></span>:
    main()</pre></div>

<p>Generated output:</p>

<div class="highlight highlight-source-python"><pre>{
    <span class="pl-s"><span class="pl-pds">"</span>result<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>payments<span class="pl-pds">"</span></span>: [
            {
                <span class="pl-s"><span class="pl-pds">"</span>tx_hash<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>66040ad29f0d780b4d47641a67f410c28cce575b5324c43b784bb376f4e30577<span class="pl-pds">"</span></span>,
                <span class="pl-s"><span class="pl-pds">"</span>amount<span class="pl-pds">"</span></span>: <span class="pl-c1">4800000000000</span>,
                <span class="pl-s"><span class="pl-pds">"</span>block_height<span class="pl-pds">"</span></span>: <span class="pl-c1">795523</span>,
                <span class="pl-s"><span class="pl-pds">"</span>payment_id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>426870cb29c598e191184fa87003ca562d9e25f761ee9e520a888aec95195912<span class="pl-pds">"</span></span>,
                <span class="pl-s"><span class="pl-pds">"</span>unlock_time<span class="pl-pds">"</span></span>: <span class="pl-c1">0</span>
            }
        ]
    },
    <span class="pl-s"><span class="pl-pds">"</span>jsonrpc<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>2.0<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span>
}</pre></div>

<p><strong>Basic example 3: get incoming transfers</strong></p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">import</span> requests
<span class="pl-k">import</span> json

<span class="pl-k">def</span> <span class="pl-en">main</span>():

    <span class="pl-c"># simple wallet is running on the localhost and port of 18082</span>
    url <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>http://localhost:18082/json_rpc<span class="pl-pds">"</span></span>

    <span class="pl-c"># standard json header</span>
    headers <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">'</span>content-type<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>application/json<span class="pl-pds">'</span></span>}

    <span class="pl-c"># bitmonerod' procedure/method to call</span>
    rpc_input <span class="pl-k">=</span> {
            <span class="pl-s"><span class="pl-pds">"</span>method<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>incoming_transfers<span class="pl-pds">"</span></span>,
            <span class="pl-s"><span class="pl-pds">"</span>params<span class="pl-pds">"</span></span>: {<span class="pl-s"><span class="pl-pds">"</span>transfer_type<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>all<span class="pl-pds">"</span></span>}
    }

    <span class="pl-c"># add standard rpc values</span>
    rpc_input.update({<span class="pl-s"><span class="pl-pds">"</span>jsonrpc<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>2.0<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span>})

    <span class="pl-c"># execute the rpc request</span>
    response <span class="pl-k">=</span> requests.post(
         url,
         <span class="pl-smi">data</span><span class="pl-k">=</span>json.dumps(rpc_input),
         <span class="pl-smi">headers</span><span class="pl-k">=</span>headers)

    <span class="pl-c"># make json dict with response</span>
    response_json <span class="pl-k">=</span> response.json()

    <span class="pl-c"># amounts in cryptonote are encoded in a way which is convenient</span>
    <span class="pl-c"># for a computer, not a user. Thus, its better need to recode them</span>
    <span class="pl-c"># to something user friendly, before displaying them.</span>
    <span class="pl-c">#</span>
    <span class="pl-c"># For examples:</span>
    <span class="pl-c"># 4760000000000 is 4.76</span>
    <span class="pl-c"># 80000000000   is 0.08</span>
    <span class="pl-c">#</span>
    <span class="pl-k">if</span> <span class="pl-s"><span class="pl-pds">"</span>result<span class="pl-pds">"</span></span> <span class="pl-k">in</span> response_json:
        <span class="pl-k">if</span> <span class="pl-s"><span class="pl-pds">"</span>transfers<span class="pl-pds">"</span></span> <span class="pl-k">in</span> response_json[<span class="pl-s"><span class="pl-pds">"</span>result<span class="pl-pds">"</span></span>]:
            <span class="pl-k">for</span> transfer <span class="pl-k">in</span> response_json[<span class="pl-s"><span class="pl-pds">"</span>result<span class="pl-pds">"</span></span>][<span class="pl-s"><span class="pl-pds">"</span>transfers<span class="pl-pds">"</span></span>]:
                transfer[<span class="pl-s"><span class="pl-pds">"</span>amount<span class="pl-pds">"</span></span>] <span class="pl-k">=</span> <span class="pl-c1">float</span>(get_money(<span class="pl-c1">str</span>(transfer[<span class="pl-s"><span class="pl-pds">"</span>amount<span class="pl-pds">"</span></span>])))


    <span class="pl-c"># pretty print json output</span>
    <span class="pl-k">print</span>(json.dumps(response_json, <span class="pl-smi">indent</span><span class="pl-k">=</span><span class="pl-c1">4</span>))

<span class="pl-k">def</span> <span class="pl-en">get_money</span>(<span class="pl-smi">amount</span>):
    <span class="pl-s"><span class="pl-pds">"""</span>decode cryptonote amount format to user friendly format. Hope its correct.<span class="pl-pds">"""</span></span>

    CRYPTONOTE_DISPLAY_DECIMAL_POINT <span class="pl-k">=</span> <span class="pl-c1">12</span>

    s <span class="pl-k">=</span> amount

    <span class="pl-k">if</span> <span class="pl-c1">len</span>(s) <span class="pl-k">&lt;</span> CRYPTONOTE_DISPLAY_DECIMAL_POINT <span class="pl-k">+</span> <span class="pl-c1">1</span>:
        <span class="pl-c"># add some trailing zeros, if needed, to have constant width</span>
        s <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>0<span class="pl-pds">'</span></span> <span class="pl-k">*</span> (CRYPTONOTE_DISPLAY_DECIMAL_POINT <span class="pl-k">+</span> <span class="pl-c1">1</span> <span class="pl-k">-</span> <span class="pl-c1">len</span>(s)) <span class="pl-k">+</span> s

    idx <span class="pl-k">=</span> <span class="pl-c1">len</span>(s) <span class="pl-k">-</span> CRYPTONOTE_DISPLAY_DECIMAL_POINT

    s <span class="pl-k">=</span> s[<span class="pl-c1">0</span>:idx] <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>.<span class="pl-pds">"</span></span> <span class="pl-k">+</span> s[idx:]

    <span class="pl-k">return</span> s

<span class="pl-k">if</span> <span class="pl-c1">__name__</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">"</span>__main__<span class="pl-pds">"</span></span>:
    main()</pre></div>

<p>Generated output:</p>

<div class="highlight highlight-source-python"><pre>{
    <span class="pl-s"><span class="pl-pds">"</span>jsonrpc<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>2.0<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>result<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>transfers<span class="pl-pds">"</span></span>: [
            {
                <span class="pl-s"><span class="pl-pds">"</span>tx_hash<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>&lt;66040ad29f0d780b4d47641a67f410c28cce575b5324c43b784bb376f4e30577&gt;<span class="pl-pds">"</span></span>,
                <span class="pl-s"><span class="pl-pds">"</span>tx_size<span class="pl-pds">"</span></span>: <span class="pl-c1">521</span>,
                <span class="pl-s"><span class="pl-pds">"</span>spent<span class="pl-pds">"</span></span>: true,
                <span class="pl-s"><span class="pl-pds">"</span>global_index<span class="pl-pds">"</span></span>: <span class="pl-c1">346865</span>,
                <span class="pl-s"><span class="pl-pds">"</span>amount<span class="pl-pds">"</span></span>: <span class="pl-c1">0.8</span>
            },
            {
                <span class="pl-s"><span class="pl-pds">"</span>tx_hash<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>&lt;66040ad29f0d780b4d47641a67f410c28cce575b5324c43b784bb376f4e30577&gt;<span class="pl-pds">"</span></span>,
                <span class="pl-s"><span class="pl-pds">"</span>tx_size<span class="pl-pds">"</span></span>: <span class="pl-c1">521</span>,
                <span class="pl-s"><span class="pl-pds">"</span>spent<span class="pl-pds">"</span></span>: true,
                <span class="pl-s"><span class="pl-pds">"</span>global_index<span class="pl-pds">"</span></span>: <span class="pl-c1">177947</span>,
                <span class="pl-s"><span class="pl-pds">"</span>amount<span class="pl-pds">"</span></span>: <span class="pl-c1">4.0</span>
            },
            {
                <span class="pl-s"><span class="pl-pds">"</span>tx_hash<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>&lt;79e7eb67b7022a21505fa034388b5e3b29e1ce639d6dec37347fefa612117ce9&gt;<span class="pl-pds">"</span></span>,
                <span class="pl-s"><span class="pl-pds">"</span>tx_size<span class="pl-pds">"</span></span>: <span class="pl-c1">562</span>,
                <span class="pl-s"><span class="pl-pds">"</span>spent<span class="pl-pds">"</span></span>: false,
                <span class="pl-s"><span class="pl-pds">"</span>global_index<span class="pl-pds">"</span></span>: <span class="pl-c1">165782</span>,
                <span class="pl-s"><span class="pl-pds">"</span>amount<span class="pl-pds">"</span></span>: <span class="pl-c1">0.08</span>
            },
            {
                <span class="pl-s"><span class="pl-pds">"</span>tx_hash<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>&lt;79e7eb67b7022a21505fa034388b5e3b29e1ce639d6dec37347fefa612117ce9&gt;<span class="pl-pds">"</span></span>,
                <span class="pl-s"><span class="pl-pds">"</span>tx_size<span class="pl-pds">"</span></span>: <span class="pl-c1">562</span>,
                <span class="pl-s"><span class="pl-pds">"</span>spent<span class="pl-pds">"</span></span>: false,
                <span class="pl-s"><span class="pl-pds">"</span>global_index<span class="pl-pds">"</span></span>: <span class="pl-c1">300597</span>,
                <span class="pl-s"><span class="pl-pds">"</span>amount<span class="pl-pds">"</span></span>: <span class="pl-c1">0.9</span>
            },
            {
                <span class="pl-s"><span class="pl-pds">"</span>tx_hash<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>&lt;79e7eb67b7022a21505fa034388b5e3b29e1ce639d6dec37347fefa612117ce9&gt;<span class="pl-pds">"</span></span>,
                <span class="pl-s"><span class="pl-pds">"</span>tx_size<span class="pl-pds">"</span></span>: <span class="pl-c1">562</span>,
                <span class="pl-s"><span class="pl-pds">"</span>spent<span class="pl-pds">"</span></span>: false,
                <span class="pl-s"><span class="pl-pds">"</span>global_index<span class="pl-pds">"</span></span>: <span class="pl-c1">214803</span>,
                <span class="pl-s"><span class="pl-pds">"</span>amount<span class="pl-pds">"</span></span>: <span class="pl-c1">3.0</span>
            },
            {
                <span class="pl-s"><span class="pl-pds">"</span>tx_hash<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>&lt;e8409a93edeed9f6c67e6716bb180d9593e8beafa63d51facf68bee233bf694d&gt;<span class="pl-pds">"</span></span>,
                <span class="pl-s"><span class="pl-pds">"</span>tx_size<span class="pl-pds">"</span></span>: <span class="pl-c1">525</span>,
                <span class="pl-s"><span class="pl-pds">"</span>spent<span class="pl-pds">"</span></span>: false,
                <span class="pl-s"><span class="pl-pds">"</span>global_index<span class="pl-pds">"</span></span>: <span class="pl-c1">165783</span>,
                <span class="pl-s"><span class="pl-pds">"</span>amount<span class="pl-pds">"</span></span>: <span class="pl-c1">0.08</span>
            },
            {
                <span class="pl-s"><span class="pl-pds">"</span>tx_hash<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>&lt;e8409a93edeed9f6c67e6716bb180d9593e8beafa63d51facf68bee233bf694d&gt;<span class="pl-pds">"</span></span>,
                <span class="pl-s"><span class="pl-pds">"</span>tx_size<span class="pl-pds">"</span></span>: <span class="pl-c1">525</span>,
                <span class="pl-s"><span class="pl-pds">"</span>spent<span class="pl-pds">"</span></span>: false,
                <span class="pl-s"><span class="pl-pds">"</span>global_index<span class="pl-pds">"</span></span>: <span class="pl-c1">375952</span>,
                <span class="pl-s"><span class="pl-pds">"</span>amount<span class="pl-pds">"</span></span>: <span class="pl-c1">0.7</span>
            }
        ]
    },
    <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span>
}</pre></div>

<p>More examples are <a href="https://github.com/moneroexamples/python-json-rpc/blob/master/src/simplewallet_rpc_examples.py">here</a></p>

<h2>
<a id="bitmonreod" class="anchor" href="#bitmonreod" aria-hidden="true"><span class="octicon octicon-link"></span></a>bitmonreod</h2>

<p>The baisc <code>bitmonerod</code> rpc calls are as follows:</p>

<ul>
<li>getheight</li>
<li>query_key</li>
<li>mining_status</li>
<li>getlastblockheader</li>
<li>getblockheaderbyhash</li>
<li>getblockheaderbyheight</li>
<li>getblock</li>
<li>get_info</li>
<li>
<p>get_connections</p>

<p><strong>Prerequsits</strong></p>

<p>Before executing this code make sure that <code>bitmonerod</code> is running.
Just like before, the code was written, tested and executed on Ubuntu 15.10 with
Python 3.4.3 and it requires the <a href="https://pypi.python.org/pypi/requests">Requests package</a>.</p>
</li>
</ul>

<p><strong>Basic example 1: get a mining status</strong></p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">import</span> requests
<span class="pl-k">import</span> json

<span class="pl-k">def</span> <span class="pl-en">main</span>():

    <span class="pl-c"># bitmonerod' is running on the localhost and port of 18081</span>
    url <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>http://localhost:18081/mining_status<span class="pl-pds">"</span></span>

    <span class="pl-c"># standard json header</span>
    headers <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">'</span>content-type<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>application/json<span class="pl-pds">'</span></span>}

    <span class="pl-c"># execute the rpc request</span>
    response <span class="pl-k">=</span> requests.post(
        url,
        <span class="pl-smi">headers</span><span class="pl-k">=</span>headers)

    <span class="pl-c"># pretty print json output</span>
    <span class="pl-k">print</span>(json.dumps(response.json(), <span class="pl-smi">indent</span><span class="pl-k">=</span><span class="pl-c1">4</span>))

<span class="pl-k">if</span> <span class="pl-c1">__name__</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">"</span>__main__<span class="pl-pds">"</span></span>:
    main()</pre></div>

<p>Generated output:</p>

<div class="highlight highlight-source-python"><pre>{
    <span class="pl-s"><span class="pl-pds">"</span>status<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>OK<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>threads_count<span class="pl-pds">"</span></span>: <span class="pl-c1">2</span>,
    <span class="pl-s"><span class="pl-pds">"</span>speed<span class="pl-pds">"</span></span>: <span class="pl-c1">117</span>,
    <span class="pl-s"><span class="pl-pds">"</span>active<span class="pl-pds">"</span></span>: true,
    <span class="pl-s"><span class="pl-pds">"</span>address<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>48daf1rG3hE1Txapcsxh6WXNe9MLNKtu7W7tKTivtSoVLHErYzvdcpea2nSTgGkz66RFP4GKVAsTV14v6G3oddBTHfxP6tU<span class="pl-pds">"</span></span>
}</pre></div>

<p><strong>Basic example 2: get block header having a block hash</strong></p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">import</span> requests
<span class="pl-k">import</span> json

<span class="pl-k">def</span> <span class="pl-en">main</span>():

    <span class="pl-c"># bitmonerod is running on the localhost and port of 18081</span>
    url <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>http://localhost:18081/json_rpc<span class="pl-pds">"</span></span>

    <span class="pl-c"># standard json header</span>
    headers <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">'</span>content-type<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>application/json<span class="pl-pds">'</span></span>}

    <span class="pl-c"># the block to get</span>
    block_hash <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>d78e2d024532d8d8f9c777e2572623fd0f229d72d9c9c9da3e7cb841a3cb73c6<span class="pl-pds">'</span></span>

    <span class="pl-c"># bitmonerod' procedure/method to call</span>
    rpc_input <span class="pl-k">=</span> {
           <span class="pl-s"><span class="pl-pds">"</span>method<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>getblockheaderbyhash<span class="pl-pds">"</span></span>,
           <span class="pl-s"><span class="pl-pds">"</span>params<span class="pl-pds">"</span></span>: {<span class="pl-s"><span class="pl-pds">"</span>hash<span class="pl-pds">"</span></span>: block_hash}
    }

    <span class="pl-c"># add standard rpc values</span>
    rpc_input.update({<span class="pl-s"><span class="pl-pds">"</span>jsonrpc<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>2.0<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span>})

    <span class="pl-c"># execute the rpc request</span>
    response <span class="pl-k">=</span> requests.post(
        url,
        <span class="pl-smi">data</span><span class="pl-k">=</span>json.dumps(rpc_input),
        <span class="pl-smi">headers</span><span class="pl-k">=</span>headers)

    <span class="pl-c"># pretty print json output</span>
    <span class="pl-k">print</span>(json.dumps(response.json(), <span class="pl-smi">indent</span><span class="pl-k">=</span><span class="pl-c1">4</span>))

<span class="pl-k">if</span> <span class="pl-c1">__name__</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">"</span>__main__<span class="pl-pds">"</span></span>:
    main()</pre></div>

<p>Generated output:</p>

<div class="highlight highlight-source-python"><pre>{
    <span class="pl-s"><span class="pl-pds">"</span>result<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>status<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>OK<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>block_header<span class="pl-pds">"</span></span>: {
            <span class="pl-s"><span class="pl-pds">"</span>difficulty<span class="pl-pds">"</span></span>: <span class="pl-c1">756932534</span>,
            <span class="pl-s"><span class="pl-pds">"</span>height<span class="pl-pds">"</span></span>: <span class="pl-c1">796743</span>,
            <span class="pl-s"><span class="pl-pds">"</span>nonce<span class="pl-pds">"</span></span>: <span class="pl-c1">8389</span>,
            <span class="pl-s"><span class="pl-pds">"</span>depth<span class="pl-pds">"</span></span>: <span class="pl-c1">46</span>,
            <span class="pl-s"><span class="pl-pds">"</span>orphan_status<span class="pl-pds">"</span></span>: false,
            <span class="pl-s"><span class="pl-pds">"</span>hash<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>d78e2d024532d8d8f9c777e2572623fd0f229d72d9c9c9da3e7cb841a3cb73c6<span class="pl-pds">"</span></span>,
            <span class="pl-s"><span class="pl-pds">"</span>timestamp<span class="pl-pds">"</span></span>: <span class="pl-c1">1445741816</span>,
            <span class="pl-s"><span class="pl-pds">"</span>major_version<span class="pl-pds">"</span></span>: <span class="pl-c1">1</span>,
            <span class="pl-s"><span class="pl-pds">"</span>minor_version<span class="pl-pds">"</span></span>: <span class="pl-c1">0</span>,
            <span class="pl-s"><span class="pl-pds">"</span>prev_hash<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>dff9c6299c84f945fabde9e96afa5d44f3c8fa88835fb87a965259c46694a2cd<span class="pl-pds">"</span></span>,
            <span class="pl-s"><span class="pl-pds">"</span>reward<span class="pl-pds">"</span></span>: <span class="pl-c1">8349972377827</span>
        }
    },
    <span class="pl-s"><span class="pl-pds">"</span>jsonrpc<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>2.0<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span>
}</pre></div>

<p><strong>Basic example 3: get full block information</strong></p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">import</span> requests
<span class="pl-k">import</span> json

<span class="pl-k">def</span> <span class="pl-en">main</span>():

    <span class="pl-c"># bitmonerod is running on the localhost and port of 18082</span>
    url <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>http://localhost:18081/json_rpc<span class="pl-pds">"</span></span>

    <span class="pl-c"># standard json header</span>
    headers <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">'</span>content-type<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>application/json<span class="pl-pds">'</span></span>}

    <span class="pl-c"># the block to get</span>
    block_hash <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>d78e2d024532d8d8f9c777e2572623fd0f229d72d9c9c9da3e7cb841a3cb73c6<span class="pl-pds">'</span></span>

    <span class="pl-c"># bitmonerod' procedure/method to call</span>
    rpc_input <span class="pl-k">=</span> {
           <span class="pl-s"><span class="pl-pds">"</span>method<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>getblock<span class="pl-pds">"</span></span>,
           <span class="pl-s"><span class="pl-pds">"</span>params<span class="pl-pds">"</span></span>: {<span class="pl-s"><span class="pl-pds">"</span>hash<span class="pl-pds">"</span></span>: block_hash}
    }

    <span class="pl-c"># add standard rpc values</span>
    rpc_input.update({<span class="pl-s"><span class="pl-pds">"</span>jsonrpc<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>2.0<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span>})

    <span class="pl-c"># execute the rpc request</span>
    response <span class="pl-k">=</span> requests.post(
        url,
        <span class="pl-smi">data</span><span class="pl-k">=</span>json.dumps(rpc_input),
        <span class="pl-smi">headers</span><span class="pl-k">=</span>headers)

    <span class="pl-c"># the response will contain binary blob. For some reason</span>
    <span class="pl-c"># python's json encoder will crash trying to parse such</span>
    <span class="pl-c"># response. Thus, its better to remove it from the response.</span>
    response_json_clean <span class="pl-k">=</span> json.loads(
                            <span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n</span><span class="pl-pds">"</span></span>.join(<span class="pl-c1">filter</span>(
                                <span class="pl-k">lambda</span> <span class="pl-smi">l</span>: <span class="pl-s"><span class="pl-pds">"</span>blob<span class="pl-pds">"</span></span> <span class="pl-k">not</span> <span class="pl-k">in</span> l, response.text.split(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n</span><span class="pl-pds">"</span></span>)
                            )))

    <span class="pl-c"># pretty print json output</span>
    <span class="pl-k">print</span>(json.dumps(response_json_clean, <span class="pl-smi">indent</span><span class="pl-k">=</span><span class="pl-c1">4</span>))

<span class="pl-k">if</span> <span class="pl-c1">__name__</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">"</span>__main__<span class="pl-pds">"</span></span>:
    main()</pre></div>

<p>Generated output:</p>

<div class="highlight highlight-source-python"><pre>{
    <span class="pl-s"><span class="pl-pds">"</span>jsonrpc<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>2.0<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>result<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>block_header<span class="pl-pds">"</span></span>: {
            <span class="pl-s"><span class="pl-pds">"</span>difficulty<span class="pl-pds">"</span></span>: <span class="pl-c1">756932534</span>,
            <span class="pl-s"><span class="pl-pds">"</span>major_version<span class="pl-pds">"</span></span>: <span class="pl-c1">1</span>,
            <span class="pl-s"><span class="pl-pds">"</span>height<span class="pl-pds">"</span></span>: <span class="pl-c1">796743</span>,
            <span class="pl-s"><span class="pl-pds">"</span>prev_hash<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>dff9c6299c84f945fabde9e96afa5d44f3c8fa88835fb87a965259c46694a2cd<span class="pl-pds">"</span></span>,
            <span class="pl-s"><span class="pl-pds">"</span>depth<span class="pl-pds">"</span></span>: <span class="pl-c1">166</span>,
            <span class="pl-s"><span class="pl-pds">"</span>reward<span class="pl-pds">"</span></span>: <span class="pl-c1">8349972377827</span>,
            <span class="pl-s"><span class="pl-pds">"</span>minor_version<span class="pl-pds">"</span></span>: <span class="pl-c1">0</span>,
            <span class="pl-s"><span class="pl-pds">"</span>timestamp<span class="pl-pds">"</span></span>: <span class="pl-c1">1445741816</span>,
            <span class="pl-s"><span class="pl-pds">"</span>nonce<span class="pl-pds">"</span></span>: <span class="pl-c1">8389</span>,
            <span class="pl-s"><span class="pl-pds">"</span>orphan_status<span class="pl-pds">"</span></span>: false,
            <span class="pl-s"><span class="pl-pds">"</span>hash<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>d78e2d024532d8d8f9c777e2572623fd0f229d72d9c9c9da3e7cb841a3cb73c6<span class="pl-pds">"</span></span>
        },
        "json": "{\n  \"major_version\": 1, \n  \"minor_version\": 0, \n  \"timestamp\": 1445741816, \n  \"prev_id\": \"dff9c6299c84f945fabde9e96afa5d44f3c8fa88835fb87a965259c46694a2cd\", \n  \"nonce\": 8389, \n  \"miner_tx\": {\n    \"version\": 1, \n    \"unlock_time\": 796803, \n    \"vin\": [ {\n        \"gen\": {\n          \"height\": 796743\n        }\n      }\n    ], \n    \"vout\": [ {\n        \"amount\": 9972377827, \n        \"target\": {\n          \"key\": \"aecebf2757be84a2d986052607ec3114969f7c9e128a051f5e13f2304287733d\"\n        }\n      }, {\n        \"amount\": 40000000000, \n        \"target\": {\n          \"key\": \"c3a6d449f3fa837edbbc6beac8bc0405c6340c4e39418164b4aa1fa2202573f2\"\n        }\n      }, {\n        \"amount\": 300000000000, \n        \"target\": {\n          \"key\": \"cfce614b779ab2705fc5f94a022eb983a2960ba9da02d61f430e988128236b0a\"\n        }\n      }, {\n        \"amount\": 8000000000000, \n        \"target\": {\n          \"key\": \"b445b474d19ae555e048762e12ac8c406a4a6d7b0f37993dc8dabe7a31ef65b8\"\n        }\n      }\n    ], \n    \"extra\": [ 1, 243, 56, 214, 120, 176, 255, 133, 1, 251, 134, 27, 135, 49, 198, 55, 249, 146, 222, 116, 48, 103, 249, 229, 195, 120, 162, 127, 62, 35, 57, 231, 51, 2, 8, 0, 0, 0, 0, 25, 79, 41, 47\n    ], \n    \"signatures\": [ ]\n  }, \n  \"tx_hashes\": [ \"cc283dcae267c622d685b3e5f8e72aaba807dad0bb2d4170521af57c50be8165\", \"d2873b1c1800ce04434c663893a16417e8717015e9686914166f7957c5eabd68\"\n  ]\n}",
        <span class="pl-s"><span class="pl-pds">"</span>tx_hashes<span class="pl-pds">"</span></span>: [
            <span class="pl-s"><span class="pl-pds">"</span>cc283dcae267c622d685b3e5f8e72aaba807dad0bb2d4170521af57c50be8165<span class="pl-pds">"</span></span>,
            <span class="pl-s"><span class="pl-pds">"</span>d2873b1c1800ce04434c663893a16417e8717015e9686914166f7957c5eabd68<span class="pl-pds">"</span></span>
        ],
        <span class="pl-s"><span class="pl-pds">"</span>status<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>OK<span class="pl-pds">"</span></span>
    },
    <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span>
}
</pre></div>

<p>More examples hopefully coming soon.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/moneroexamples/python-json-rpc">Monero Examples</a> is maintained by <a href="https://github.com/moneroexamples">moneroexamples</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
